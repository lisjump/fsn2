<!DOCTYPE html>
<html>
 <head>
   <title>{% block title %}{% endblock %}</title>
   <script src="{{ url_for('static', filename='script.js') }}"></script>
   <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  </head>
  <body>
    {% if current_user.is_authenticated %}
      {% set loginlist = (url_for('logout'), 'logout', 'Logout') -%}
    {% else %}
      {% set loginlist = (url_for('login'), 'login', 'Login') -%}
    {% endif %}

    <div class="menubox">
      {% set navigation_bar = [
        ('/', 'home', 'Home'),
        ('/register', 'register', 'Register'),
        ('/visitlog', 'visit', 'Visit Log'),
        loginlist,
      ] -%}
      {% set admin_bar = [
        ('/adminhome', 'adminhome', 'Home'),
      ] -%}

      {% set active_page = active_page|default('home') -%}

      <ul class="tabbedmenu">
        {% for href, id, caption in navigation_bar %}
          <li class={% if id == active_page %}"activetab"{% else %}"tab"{% endif %}>
            <a href="{{ href|e }}">{{ caption|e }}</a>
          </li>
        {% endfor %}
        {% if session.admin %}
          {% for href, id, caption in admin_bar %}
            <li class={% if id == active_page %}"activetab"{% else %}"tab"{% endif %}>
              <a href="{{ href|e }}">{{ caption|e }}</a>
            </li>
          {% endfor %}
          <li class="tab" onclick="Overlay('/adminlogin', '')">
            <span class="menu"> Admin </span>
          </li>
        {% endif %}
      </ul>

    </div>
    <div class='margin'>
      <hr>
      {% with messages = get_flashed_messages() %}
      {% if messages %}
      <ul>
          {% for message in messages %}
          <li>{{ message }}</li>
          {% endfor %}
      </ul>
      {% endif %}
      {% endwith %}
      <div id="content">{% block content %}{% endblock %}</div>
    </div>
  </body>
</html>
